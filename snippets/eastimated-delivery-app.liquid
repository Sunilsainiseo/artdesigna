<div id="shopify-block-7902831097370503076" class="shopify-block shopify-app-block"><!-- BEGIN app snippet: edd_read_data_from_metafields -->






<!-- get collection --> 














    











<div class='sb_info_extension metafield_update' style='display:none'>
<div class='sb_store_date'>{{ "now" | date: "%b %d, %Y %H:%M" }}</div>
<div >Product Tag : 
  {% for tag in product.tags %}
    <div> {{ forloop.index0 }} : 
    <span class='edd_sb_product_tag sb_product_tag_{{ forloop.index0 }}'>{{ tag }}</span> 
      
    </div>
  {% endfor %}
</div>
<div >Product Collection : 
  {% for collection in product.collections %}
    <div> {{ forloop.index0 }} : 
    <span class='edd_sb_product_collection product_collection_{{ forloop.index0 }}'>{{ collection.id }}</span> 
      
    </div>
  {% endfor %}
</div>
</div>



<script type="lazyload_int">
  var sb_edd_general_data = {{ shop.metafields.deliveryEstimation.Settings | json }};
  //var sb_edd_plan_info = sb_edd_general_data.plan_info;
  //var sb_edd_options = sb_edd_general_data.edd_options;
  var sb_edd_all_product_msg = {{ shop.metafields.deliveryEstimation.edd_all_product_msg | json }}
  var sb_edd_collection_msg = {{ shop.metafields.deliveryEstimation.edd_collection_msg  | json }}
  var sb_edd_specific_product_msg = {{ shop.metafields.deliveryEstimation.edd_specific_product_msg | json }}
  var sb_edd_product_tag_msg = {{ shop.metafields.deliveryEstimation.edd_product_tag_msg | json }}
  var sb_edd_product_vendor_msg = {{ shop.metafields.deliveryEstimation.edd_product_vendor_msg | json }}
  //var edd_exclude_product = sb_edd_general_data.edd_exclude_product;
  var specific_date_format = 'not_set';
  var specific_date_option = 'not_set';
  var specific_custom_date_format = 'not_set';
  var specific_cutofftime_enable = 'not_set';
  var specific_cutofftime = 'not_set';
  var sb_additional_option = 'not_set';
  var sb_is_continue_selling = '0';

  if(sb_edd_general_data == null)
  {
  if(typeof edd_options != 'undefined'){
  var sb_edd_options = edd_options ;
  var sb_edd_plan_info = edd_plan_info;
  }
  }else{
  var sb_edd_plan_info = sb_edd_general_data.plan_info;
  var sb_edd_options = sb_edd_general_data.edd_options;
  var edd_exclude_product = sb_edd_general_data.edd_exclude_product  
  }
  if(sb_edd_all_product_msg == null){console.log('meta not set for all product'); if(typeof edd_all_product_msg != 'undefined'){ sb_edd_all_product_msg = edd_all_product_msg}else{sb_edd_all_product_msg = 'not_set'}}
  if(sb_edd_collection_msg == null){if(typeof edd_collection_msg != 'undefined'){sb_edd_collection_msg = edd_collection_msg}else{sb_edd_collection_msg = 'not_set'}}
  if(sb_edd_specific_product_msg == null){if(typeof edd_specific_product_msg != 'undefined'){sb_edd_specific_product_msg = edd_specific_product_msg}else{sb_edd_specific_product_msg = 'not_set'}}
  if(sb_edd_product_tag_msg == null){if(typeof edd_product_tag_msg != 'undefined'){sb_edd_product_tag_msg = edd_product_tag_msg}else{sb_edd_product_tag_msg = 'not_set'}}
  if(sb_edd_product_vendor_msg == null){if(typeof edd_product_vendor_msg != 'undefined'){sb_edd_product_vendor_msg = edd_product_vendor_msg}else{sb_edd_product_vendor_msg = 'not_set'}}

  if(typeof sb_edd_all_product_msg[0].is_continue_selling == 'undefined'){
    sb_edd_all_product_msg = createNewObjectForExistingStore(sb_edd_all_product_msg)
  }
  if(typeof sb_edd_collection_msg[0].is_continue_selling == 'undefined'){
    sb_edd_collection_msg = createNewObjectForExistingStore(sb_edd_collection_msg)
  }
  if(typeof sb_edd_specific_product_msg[0].is_continue_selling == 'undefined'){
    sb_edd_specific_product_msg = createNewObjectForExistingStore(sb_edd_specific_product_msg)
  }
  if(typeof sb_edd_product_tag_msg[0].is_continue_selling == 'undefined'){
    sb_edd_product_tag_msg = createNewObjectForExistingStore(sb_edd_product_tag_msg)
  }
  if(typeof sb_edd_product_vendor_msg[0].is_continue_selling == 'undefined'){
    sb_edd_product_vendor_msg = createNewObjectForExistingStore(sb_edd_product_vendor_msg)
  }
  // country checker
  var is_country_dropdown_on = '0';
  if(typeof sb_edd_options.is_country_dropdown_on != "undefined"){
    is_country_dropdown_on = sb_edd_options.is_country_dropdown_on;
  }

  function createNewObjectForExistingStore(edd_obj_meta){
    for(i=0;i<edd_obj_meta.length;i++){
      if(typeof edd_obj_meta[i].location_enable == 'undefined'){
          obj  = {location_enable :'0'}
          edd_obj_meta[i] = Object.assign({}, obj, edd_obj_meta[i]);
      }
      if(typeof edd_obj_meta[i].shipping_enable == 'undefined'){
          obj  = {shipping_enable :'0'}
          edd_obj_meta[i] = Object.assign({}, obj, edd_obj_meta[i]);
      }
      if(typeof edd_obj_meta[i].zipcode_enable == 'undefined'){
          obj  = {zipcode_enable :'0'}
          edd_obj_meta[i] = Object.assign({}, obj, edd_obj_meta[i]);
      } 
      if(typeof edd_obj_meta[i].is_continue_selling == 'undefined'){
          obj  = {is_continue_selling :'0'}
          edd_obj_meta[i] = Object.assign({}, obj, edd_obj_meta[i]);
      }
      if(typeof edd_obj_meta[i].additional_option == 'undefined'){
          obj  = {additional_option :'not_set'}
          edd_obj_meta[i] = Object.assign({}, obj, edd_obj_meta[i]);
      }
    }
    return edd_obj_meta;
  }
  // country checker
  
  //console.log(sb_edd_general_data)
  //console.log(sb_edd_options)
  //console.log(sb_edd_all_product_msg)
  //console.log(sb_edd_collection_msg)
  //console.log(sb_edd_specific_product_msg)
  //console.log(sb_edd_product_tag_msg)
  //console.log(sb_edd_product_vendor_msg)
  //console.log(edd_exclude_product)

   <!-- warehouse priority -->
  var warehouse_priority_option = 'default';
  var warehouse_priority = 'not_set';

  if(typeof sb_edd_options.warehouse_priority_option != 'undefined'){
     warehouse_priority_option = sb_edd_options.warehouse_priority_option
  }
   if(typeof sb_edd_options.warehouse_priority != 'undefined'){
     warehouse_priority = sb_edd_options.warehouse_priority
     warehouse_priority = warehouse_priority.split(',')
     warehouse_priority = warehouse_priority.map(i=>Number(i));
  }
  <!-- warehouse priority -->

  var all_rule_country_array = [];
  if(typeof sb_edd_options.all_rule_country != 'undefined'){
     all_rule_country_array = sb_edd_options.all_rule_country;
  }

 //console.log('file : edd_read_data_from_liquid_for_location')

  
  {% if template contains 'index' %}
  var sb_edd_is_homepage = `1`;
  {% else %}
  var sb_edd_is_homepage = `0`;
  {% endif %}

  //var sb_edd_is_homepage = '';
  var edd_sb_product_id = '';
  var edd_sb_product_title = '';
  var edd_sb_product_handle = '';
  var edd_sb_product_type = '';
  var edd_sb_product_vendor = '';
  var edd_check_sb_collection_id = '';
  var edd_sb_product_qty = '';
  var edd_sb_product_weight = '';
  var sb_product_avaiable = '';
  var edd_sb_product_tag = new Array();
  var edd_sb_collection_id = new Array();

  var sb_edd_zipcode_enable = '0';
  var sb_edd_shipping_enable = '0';
  var sb_edd_location_enable = '0';
  var sb_edd_zipcode_list = 'not_set';
  var edd_multiple_rule_for_shipping = 'not_set';

  var sb_set_vaction_msg = '0';
  
  var sb_product_have_qty = 0;
  var sb_edd_message = 'not_set';
  var sb_edd_preview_design = 'not_set';
  var sb_set_specific_msg = 0;
  var sb_is_exclude_product = '0';
  var edd_data;
  var edd_store_country,edd_store_country_code ,edd_user_country ,edd_user_country_code,edd_app_plan,edd_country_name,edd_country_code,edd_store_id;


  var sb_is_set_msg_for_product = '0';
  var is_set_msg_for_sb_product_type = '0';
  var is_set_msg_for_sb_product_tag = '0';
  var is_set_msg_for_sb_product_vendor = '0';
  var is_set_msg_for_sb_all_product = '0';
  var is_set_msg_for_sb_collection = '0';
  var sb_product_locations=[];
  var sb_location_with_qty = []; <!-- warehouse priority -->
  var variant_with_warehouse_qty = []; <!-- warehouse priority -->
  var sb_locationId_having_max_qty;
  var sb_is_rule_set_for_location = '0';
  var sb_is_rule_set_for_zipcode = '0';
  var get_location_response = '0';
  if(typeof sb_edd_options.is_rule_set_for_location != 'undefined'){
    sb_is_rule_set_for_location = sb_edd_options.is_rule_set_for_location;
  }
  if(typeof sb_edd_options.is_rule_set_for_zipcode != 'undefined'){
    sb_is_rule_set_for_zipcode = sb_edd_options.is_rule_set_for_zipcode;
  }
    //console.log('sb_is_rule_set_for_location  '+sb_is_rule_set_for_location)

  if(typeof delivery_shop !== 'undefined'){
      edd_shop = delivery_shop;           
    }else{           
      edd_shop = Shopify.shop;
    } 
  
  

  if(sb_edd_is_homepage == '1' ){
   
     if(typeof show_edd_on_homepage_custom != 'undefined' ){
       if(show_edd_on_homepage_custom == '1'){
          edd_sb_product_id = edd_product_id;
          //console.log('edd_product_id '+edd_product_id+' edd_sb_product_id '+edd_sb_product_id)
          edd_sb_product_title = `{{ product.title }}`;
          edd_sb_product_handle = `{{ product.handle }}`;
          edd_sb_product_type = edd_product_type;
          edd_sb_product_vendor = edd_product_vendor;
          {% if template contains 'product' %}
          //edd_check_sb_collection_id = `{{ product.collections.first.id }}`;
          {% else %}
          //edd_check_sb_collection_id = `not_set`;
          {% endif %}
          edd_sb_product_qty =edd_product_qty;
          edd_sb_product_weight = edd_product_weight;
          sb_product_avaiable = product_avaiable;
          edd_sb_product_tag = edd_product_tag;
          edd_sb_collection_id = edd_collection_id;
        }
    }
    
  }else{

     edd_sb_product_id = `{{ product.id }}`;
     edd_sb_product_title = `{{ product.title }}`;
     edd_sb_product_handle = `{{ product.handle }}`;
     edd_sb_product_type = `{{ product.type }}`;
     edd_sb_product_vendor = `{{ product.vendor }}`;
     {% if template contains 'product' %}
     edd_check_sb_collection_id = `{{ product.collections.first.id }}`;
     {% else %}
     edd_check_sb_collection_id = `not_set`;
     {% endif %}
     edd_sb_product_qty = `{{ product.selected_or_first_available_variant.inventory_quantity }}`;
     edd_sb_product_weight = `{{ product.selected_or_first_available_variant.weight }}`;
     sb_product_avaiable = `{{ product.selected_or_first_available_variant.available }}`;
     edd_sb_product_tag = new Array();
     edd_sb_collection_id = new Array();
            
      for (i = 0; i < document.getElementsByClassName("edd_sb_product_tag").length; i++) {
          edd_sb_product_tag.push(document.querySelector(".sb_info_extension  .sb_product_tag_"+i).innerText);
          //console.log(document.querySelector(".sb_info_extension  .sb_product_tag_"+i).innerText)
      }

      
      for (i = 0; i < document.getElementsByClassName("edd_sb_product_collection").length; i++) {
          edd_sb_collection_id.push(document.querySelector(".sb_info_extension  .product_collection_"+i).innerText);
          //console.log(document.querySelector(".sb_info_extension  .product_collection_"+i).innerText)
      }

    
  }
   
function setEDDCookie(cname, cvalue){
      var d = new Date();
      d.setTime(d.getTime() + (24 * 60 * 60 * 1000));
      var expires = "expires="+d.toUTCString();
    
} 
function getEDDCookie(cname){
      let name = cname + "=";
  let decodedCookie = document.cookie;
      let ca = decodedCookie.split(';');
      for(let i = 0; i <ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }
  
function check_sb_edd_coockie($){
        var check_edd_data = getEDDCookie("edd_data");
 
        user_country_code = Shopify.country;
        if(typeof sb_edd_options.store_country_code != 'undefined' && sb_edd_options.store_country_code != null ){
          store_country_code = sb_edd_options.store_country_code;
        }else{
          store_country_code = user_country_code;
        }
        setCoockieForCountryMsg(store_country_code,user_country_code);
}

function setCoockieForCountryMsg(store_country_code,user_country_code){
  sb_countries = [{country: 'All Country', code: 'all_country'}, {country: 'Afghanistan', code: 'AF'}, {country: 'land Islands', code: 'AX'}, {country: 'Albania', code: 'AL'}, {country: 'Algeria', code: 'DZ'}, {country: 'American Samoa', code: 'AS'}, {country: 'AndorrA', code: 'AD'}, {country: 'Angola', code: 'AO'}, {country: 'Anguilla', code: 'AI'}, {country: 'Antarctica', code: 'AQ'}, {country: 'Antigua and Barbuda', code: 'AG'}, {country: 'Argentina', code: 'AR'}, {country: 'Armenia', code: 'AM'}, {country: 'Aruba', code: 'AW'}, {country: 'Australia', code: 'AU'}, {country: 'Austria', code: 'AT'}, {country: 'Azerbaijan', code: 'AZ'}, {country: 'Bahamas', code: 'BS'}, {country: 'Bahrain', code: 'BH'}, {country: 'Bangladesh', code: 'BD'}, {country: 'Barbados', code: 'BB'}, {country: 'Belarus', code: 'BY'}, {country: 'Belgium', code: 'BE'}, {country: 'Belize', code: 'BZ'}, {country: 'Benin', code: 'BJ'}, {country: 'Bermuda', code: 'BM'}, {country: 'Bhutan', code: 'BT'}, {country: 'Bolivia', code: 'BO'}, {country: 'Bosnia And Herzegovina', code: 'BA'}, {country: 'Botswana', code: 'BW'}, {country: 'Bouvet Island', code: 'BV'}, {country: 'Brazil', code: 'BR'}, {country: 'British Indian Ocean Territory', code: 'IO'}, {country: 'Brunei Darussalam', code: 'BN'}, {country: 'Saint Barthelemy', code: 'BL'}, {country: 'Bulgaria', code: 'BG'}, {country: 'Burkina Faso', code: 'BF'}, {country: 'Burundi', code: 'BI'}, {country: 'Cambodia', code: 'KH'}, {country: 'Cameroon', code: 'CM'}, {country: 'Canada', code: 'CA'}, {country: 'Cape Verde', code: 'CV'}, {country: 'Cayman Islands', code: 'KY'}, {country: 'Central African Republic', code: 'CF'}, {country: 'Chad', code: 'TD'}, {country: 'Chile', code: 'CL'}, {country: 'China', code: 'CN'}, {country: 'Christmas Island', code: 'CX'}, {country: 'Cocos (Keeling) Islands', code: 'CC'}, {country: 'Colombia', code: 'CO'}, {country: 'Comoros', code: 'KM'}, {country: 'Congo', code: 'CG'}, {country: 'Congo, The Democratic Republic of the', code: 'CD'}, {country: 'Cook Islands', code: 'CK'}, {country: 'Costa Rica', code: 'CR'}, {country: 'Cote D"Ivoire', code: 'CI'}, {country: 'Croatia', code: 'HR'}, {country: 'Cuba', code: 'CU'}, {country: 'Cyprus', code: 'CY'}, {country: 'Czech Republic', code: 'CZ'}, {country: 'Denmark', code: 'DK'}, {country: 'Djibouti', code: 'DJ'}, {country: 'Dominica', code: 'DM'}, {country: 'Dominican Republic', code: 'DO'}, {country: 'Ecuador', code: 'EC'}, {country: 'Egypt', code: 'EG'}, {country: 'El Salvador', code: 'SV'}, {country: 'Equatorial Guinea', code: 'GQ'}, {country: 'Eritrea', code: 'ER'}, {country: 'Estonia', code: 'EE'}, {country: 'Ethiopia', code: 'ET'}, {country: 'Falkland Islands (Malvinas)', code: 'FK'}, {country: 'Faroe Islands', code: 'FO'}, {country: 'Fiji', code: 'FJ'}, {country: 'Finland', code: 'FI'}, {country: 'France', code: 'FR'}, {country: 'French Guiana', code: 'GF'}, {country: 'French Polynesia', code: 'PF'}, {country: 'French Southern Territories', code: 'TF'}, {country: 'Gabon', code: 'GA'}, {country: 'Gambia', code: 'GM'}, {country: 'Georgia', code: 'GE'}, {country: 'Germany', code: 'DE'}, {country: 'Ghana', code: 'GH'}, {country: 'Gibraltar', code: 'GI'}, {country: 'Greece', code: 'GR'}, {country: 'Greenland', code: 'GL'}, {country: 'Grenada', code: 'GD'}, {country: 'Guadeloupe', code: 'GP'}, {country: 'Guam', code: 'GU'}, {country: 'Guatemala', code: 'GT'}, {country: 'Guernsey', code: 'GG'}, {country: 'Guinea', code: 'GN'}, {country: 'Guinea-Bissau', code: 'GW'}, {country: 'Guyana', code: 'GY'}, {country: 'Haiti', code: 'HT'}, {country: 'Heard Island & Mcdonald Islands', code: 'HM'}, {country: 'Holy See (Vatican City State)', code: 'VA'}, {country: 'Honduras', code: 'HN'}, {country: 'Hong Kong', code: 'HK'}, {country: 'Hungary', code: 'HU'}, {country: 'Iceland', code: 'IS'}, {country: 'India', code: 'IN'}, {country: 'Indonesia', code: 'ID'}, {country: 'Iran, Islamic Republic Of', code: 'IR'}, {country: 'Iraq', code: 'IQ'}, {country: 'Ireland', code: 'IE'}, {country: 'Isle Of Man', code: 'IM'}, {country: 'Israel', code: 'IL'}, {country: 'Italy', code: 'IT'}, {country: 'Jamaica', code: 'JM'}, {country: 'Japan', code: 'JP'}, {country: 'Jersey', code: 'JE'}, {country: 'Jordan', code: 'JO'}, {country: 'Kazakhstan', code: 'KZ'}, {country: 'Kenya', code: 'KE'}, {country: 'Kiribati', code: 'KI'}, {country: 'Korea', code: 'KP'}, {country: 'Korea, Republic of', code: 'KR'}, {country: 'Kuwait', code: 'KW'}, {country: 'Kyrgyzstan', code: 'KG'}, {country: 'Lao People"S Democratic Republic', code: 'LA'}, {country: 'Latvia', code: 'LV'}, {country: 'Lebanon', code: 'LB'}, {country: 'Lesotho', code: 'LS'}, {country: 'Liberia', code: 'LR'}, {country: 'Libyan Arab Jamahiriya', code: 'LY'}, {country: 'Liechtenstein', code: 'LI'}, {country: 'Lithuania', code: 'LT'}, {country: 'Luxembourg', code: 'LU'}, {country: 'Macao', code: 'MO'}, {country: 'Macedonia, The Former Yugoslav Republic of', code: 'MK'}, {country: 'Madagascar', code: 'MG'}, {country: 'Malawi', code: 'MW'}, {country: 'Malaysia', code: 'MY'}, {country: 'Maldives', code: 'MV'}, {country: 'Mali', code: 'ML'}, {country: 'Malta', code: 'MT'}, {country: 'Marshall Islands', code: 'MH'}, {country: 'Martinique', code: 'MQ'}, {country: 'Mauritania', code: 'MR'}, {country: 'Mauritius', code: 'MU'}, {country: 'Mayotte', code: 'YT'}, {country: 'Mexico', code: 'MX'}, {country: 'Micronesia, Federated States of', code: 'FM'}, {country: 'Moldova', code: 'MD'}, {country: 'Monaco', code: 'MC'}, {country: 'Mongolia', code: 'MN'}, {country: 'Montenegro', code: 'ME'},{country: 'Montserrat', code: 'MS'},{country: 'Morocco', code: 'MA'}, {country: 'Mozambique', code: 'MZ'}, {country: 'Myanmar', code: 'MM'}, {country: 'Namibia', code: 'NA'}, {country: 'Nauru', code: 'NR'}, {country: 'Nepal', code: 'NP'}, {country: 'Netherlands', code: 'NL'}, {country: 'Netherlands Antilles', code: 'AN'}, {country: 'New Caledonia', code: 'NC'}, {country: 'New Zealand', code: 'NZ'}, {country: 'Nicaragua', code: 'NI'}, {country: 'Niger', code: 'NE'}, {country: 'Nigeria', code: 'NG'}, {country: 'Niue', code: 'NU'}, {country: 'Norfolk Island', code: 'NF'}, {country: 'Northern Mariana Islands', code: 'MP'}, {country: 'Norway', code: 'NO'}, {country: 'Oman', code: 'OM'}, {country: 'Pakistan', code: 'PK'}, {country: 'Palau', code: 'PW'}, {country: 'Palestinian Territory, Occupied', code: 'PS'}, {country: 'Panama', code: 'PA'}, {country: 'Papua New Guinea', code: 'PG'}, {country: 'Paraguay', code: 'PY'}, {country: 'Peru', code: 'PE'}, {country: 'Philippines', code: 'PH'}, {country: 'Pitcairn', code: 'PN'}, {country: 'Poland', code: 'PL'}, {country: 'Portugal', code: 'PT'}, {country: 'Puerto Rico', code: 'PR'}, {country: 'Qatar', code: 'QA'}, {country: 'Reunion', code: 'RE'}, {country: 'Romania', code: 'RO'}, {country: 'Russian Federation', code: 'RU'}, {country: 'Rwanda', code: 'RW'}, {country: 'Saint Helena', code: 'SH'}, {country: 'Saint Kitts And Nevis', code: 'KN'}, {country: 'Saint Lucia', code: 'LC'}, {country: 'Saint Pierre And Miquelon', code: 'PM'}, {country: 'Saint Vincent And Grenadines', code: 'VC'}, {country: 'Saint Martin', code: 'MF'}, {country: 'Samoa', code: 'WS'}, {country: 'San Marino', code: 'SM'}, {country: 'Sao Tome And Principe', code: 'ST'}, {country: 'Saudi Arabia', code: 'SA'}, {country: 'Senegal', code: 'SN'}, {country: 'Serbia', code: 'RS'}, {country: 'Seychelles', code: 'SC'}, {country: 'Sierra Leone', code: 'SL'}, {country: 'Singapore', code: 'SG'}, {country: 'Slovakia', code: 'SK'}, {country: 'Slovenia', code: 'SI'}, {country: 'Solomon Islands', code: 'SB'}, {country: 'Somalia', code: 'SO'}, {country: 'South Africa', code: 'ZA'}, {country: 'South Georgia And Sandwich Islands', code: 'GS'}, {country: 'Spain', code: 'ES'}, {country: 'Sri Lanka', code: 'LK'}, {country: 'Sudan', code: 'SD'}, {country: 'Suriname', code: 'SR'}, {country: 'Svalbard And Jan Mayen', code: 'SJ'}, {country: 'Swaziland', code: 'SZ'}, {country: 'Sweden', code: 'SE'}, {country: 'Switzerland', code: 'CH'}, {country: 'Syrian Arab Republic', code: 'SY'}, {country: 'Taiwan', code: 'TW'}, {country: 'Tajikistan', code: 'TJ'}, {country: 'Tanzania', code: 'TZ'}, {country: 'Thailand', code: 'TH'}, {country: 'Timor-Leste', code: 'TL'}, {country: 'Togo', code: 'TG'}, {country: 'Tokelau', code: 'TK'}, {country: 'Tonga', code: 'TO'}, {country: 'Trinidad And Tobago', code: 'TT'}, {country: 'Tunisia', code: 'TN'}, {country: 'Turkey', code: 'TR'}, {country: 'Turkmenistan', code: 'TM'}, {country: 'Turks And Caicos Islands', code: 'TC'}, {country: 'Tuvalu', code: 'TV'}, {country: 'Uganda', code: 'UG'}, {country: 'Ukraine', code: 'UA'}, {country: 'United Arab Emirates', code: 'AE'}, {country: 'United Kingdom', code: 'GB'}, {country: 'United States', code: 'US'}, {country: 'United States Outlying Islands', code: 'UM'}, {country: 'Uruguay', code: 'UY'}, {country: 'Uzbekistan', code: 'UZ'}, {country: 'Vanuatu', code: 'VU'}, {country: 'Venezuela', code: 'VE'}, {country: 'Viet Nam', code: 'VN'}, {country: 'Virgin Islands, British', code: 'VG'}, {country: 'Virgin Islands, U.S.', code: 'VI'}, {country: 'Wallis And Futuna', code: 'WF'}, {country: 'Western Sahara', code: 'EH'}, {country: 'Yemen', code: 'YE'}, {country: 'Zambia', code: 'ZM'}, {country: 'Zimbabwe', code: 'ZW'}   ]

  dataset = Object.keys(sb_countries).find(x => sb_countries[x].code === user_country_code);
  user_country_name  = sb_countries[dataset].country;
  dataset = Object.keys(sb_countries).find(x => sb_countries[x].code === store_country_code);
  store_country_name  = sb_countries[dataset].country;
  
  edd_data =[{store_id : sb_edd_options.store_id,
        plan : sb_edd_plan_info.plan,
        store_country_name : store_country_name,
        store_country_code : store_country_code,
        user_country_name : user_country_name,
        user_country_code : user_country_code,
        allowed_store : sb_edd_options.allow_store,
        trial_store : '0',
        plan_active : '1' ,
        is_install : '1'
  }];

  //console.log(' store_country_name '+store_country_name +' store_country_code '+store_country_code)
  //console.log(' user_country_name '+user_country_name +' user_country_code '+user_country_code)
 
  setEDDCookie("edd_data", JSON.stringify(edd_data));
  // var check_edd_data = getEDDCookie("edd_data");
  // check_edd_data = JSON.parse(check_edd_data);
  // if(typeof check_edd_data[0] != 'undefined'){
  //   check_edd_data = check_edd_data[0]
  // }
  setEDDCountryData(edd_data[0]);
 
}

function setEDDCountryData(check_edd_data){
 edd_store_country_name = check_edd_data.store_country_name;
 edd_store_country_code = check_edd_data.store_country_code;
 edd_user_country_name = check_edd_data.user_country_name;
 edd_user_country_code = check_edd_data.user_country_code;

 edd_app_plan = sb_edd_plan_info.plan;
 edd_store_id = sb_edd_options.store_id;
 edd_trial_store = sb_edd_options.trial_store;
 edd_allowed_store = sb_edd_options.allow_store;
  
  if(edd_store_id > 2614 || edd_shop == 'kitchen-king-uk.myshopify.com' || edd_shop == 'diecaststoreuk.myshopify.com' || edd_shop == 'purrfetto.myshopify.com' ||  edd_shop == 'estimated-delivery-date-time.myshopify.com'){
    //console.log('Qty => based on product qty');
    if(edd_sb_product_qty > 0){sb_product_have_qty = 1;}
  }else{
     // console.log('Qty => based on product avaiable');
    if(sb_product_avaiable == 'true'){sb_product_have_qty = 1;}
  }
  //console.log(' sb_product_have_qty '+sb_product_have_qty)
  
  var is_vaction_msg_on = 'false';
  if(typeof sb_edd_options.is_vaction_msg_on != 'undefined'){
    is_vaction_msg_on = sb_edd_options.is_vaction_msg_on;
  }

  if(is_vaction_msg_on == 'true' && typeof sb_edd_options.vacation_message != 'undefined' && typeof sb_edd_options.schedule_date != 'undefined' && typeof sb_edd_options.schedule_end_date != 'undefined'){
      vacation_message = sb_edd_options.vacation_message; 
      schedule_date = sb_edd_options.schedule_date; 
      schedule_end_date = sb_edd_options.schedule_end_date; 
     
     
      if((new Date() > new Date(schedule_date)) && (new Date() < new Date(schedule_end_date)) ){
        //console.log('=> set vacation_message')
        sb_set_vaction_msg = '1';
        sb_is_rule_set_for_location = '0';
         sb_edd_preview_design = {"animation_class":"no_effect","preview_design":"set","highlight_color":"not_set","color":"#000","border":"transparent","font_size":"16","text_align":"unset","text_transform":"unset","font_weight":"unset","font_style":"unset","background_option":"color","background":"transparent","margin":"0px 0px 0px 0px ","padding":"10px 10px 10px 10px ","border_radius":"0px "};
      }
      
    }

 // console.log('sb_set_vaction_msg =  '+sb_set_vaction_msg )
  
  if(sb_is_rule_set_for_location == '0'){
    //console.log('=> location wise edd message not set')
    //findSpecificEDDMsg();
    if(sb_set_vaction_msg == '1'){
      if(typeof edd_exclude_product != 'undefined' && edd_exclude_product != 'not_set' && edd_exclude_product.filter(e => e.check_rule_for  == edd_sb_product_id).length > 0){
        sb_is_exclude_product = '1';
        //console.log('=> exclude product');
      }else{
      sb_edd_message = sb_edd_options.vacation_message;
      sb_set_specific_msg = 1;
      }
    }else{
      findSpecificEDDMsg();
    }
  }else{
    if(typeof checkEDDextension != 'undefined'){
     clearInterval(checkEDDextension)
    }
    checkLocationResponse = setInterval(function(){
     // console.log('get_location_response '+get_location_response)
      if(get_location_response == '1'){
        clearInterval(checkLocationResponse)
        findSpecificEDDMsg();
        
      }
    },500)
  }
  
  

  if(sb_set_specific_msg == 1){
      edd_country_name = edd_user_country_name;
      edd_country_code = edd_user_country_code;
    }else{
      edd_country_name = edd_store_country_name;
      edd_country_code = edd_store_country_code;
    }

}
  
/* changelog */
/*16-02-24 */
function checkUserCountry($){

}
 function findUserCountry($){
   $.ajax({
           url: "//estimated-delivery-days.setubridgeapps.com/estimated-delivery-days/app/src/public/checkEDDPaymentFromAppExtension",
           data : {shop:edd_shop},
           type:"POST",
           success: function(response){ 
             edd_data = response;
             check_edd_data = JSON.parse(edd_data);
             setEDDCountryData(check_edd_data);
             checkEddDataInterval = setInterval(function(){
                var check_edd_data = getEDDCookie("edd_data");
                if (check_edd_data == ""){
                 //setEDDCookie("edd_data", edd_data);
                 clearInterval(checkEddDataInterval);
                }
             },700);
 
           }
         })
  }
/* changelog */


var loadScriptInLiquidData = function (url, callback) {
    var script = document.createElement('script');
    script.type = 'text/javascript';
    if (script.readyState) {
      script.onreadystatechange = function () {
        if (script.readyState == 'loaded' || script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else {
      script.onload = function () {
        callback();
      };
    }
    script.src = url;
    document.getElementsByTagName('head') [0].appendChild(script);
  };

  /* check Jquery loaded in theme or not */
  if((typeof jQuery === 'undefined') || (parseFloat(jQuery.fn.jquery) < 1.7)){
    loadScriptInLiquidData('//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js', function () {
      var jQuery191 = jQuery.noConflict(true);
      if(jQuery191(".sb_info").length){
        jQuery191('.sb_info').remove();
      }
      check_sb_edd_coockie(jQuery191);
      if(location.href.includes("/products/")){
        getLocation(jQuery191);
      }else{
        get_location_response = '1';
      }
    });

  }else{
     if(jQuery(".sb_info").length){
        jQuery('.sb_info').remove();
      }

    check_sb_edd_coockie(jQuery);
    if(location.href.includes("/products/")){
        getLocation(jQuery);
      }else{
        get_location_response = '1';
      }
  }

  function getLocation($){
  //console.log('call location sb_is_rule_set_for_location '+sb_is_rule_set_for_location);
  /* location wise edd */
    if(typeof sb_is_rule_set_for_location != 'undefined'){
      if(sb_is_rule_set_for_location == '1'){
        location_ids = sb_edd_options.sb_location;
        location_ids = location_ids.toString();
        $.ajax({
              url: "//estimated-delivery-days.setubridgeapps.com/estimated-delivery-days/app/src/public/getProductLocation",
              data : {shop:edd_shop,product_id:edd_sb_product_id,location_ids:location_ids},
              type:"GET",
              success: function(response){
                get_location_response = '1';
                 if(warehouse_priority_option == 'default'){
                  sb_locationId_having_max_qty = response.locationId_having_max_qty;
                  sb_product_locations = response.location_id;
                  sb_location_with_qty = response.location_with_qty;
                  variant_with_warehouse_qty = response.variant_with_warehouse_qty;
                }else{
                  sb_product_locations = [];
                  sb_location_with_qty = response.location_with_qty;
                  variant_with_warehouse_qty = response.variant_with_warehouse_qty;
                  if(warehouse_priority != 'not_set'){
                    for(k=0;k<warehouse_priority.length;k++){
                      check_warehouse = warehouse_priority[k];
                      if ($.inArray(check_warehouse, response.location_id) != -1){
                        sb_product_locations.push(check_warehouse)
                      }
                    }
                    if(sb_product_locations.length > 0){
                      sb_locationId_having_max_qty = sb_product_locations[0];
                    }
                  }else{
                    sb_product_locations = response.location_id
                    if(sb_product_locations.length > 0){
                      sb_locationId_having_max_qty = sb_product_locations[0];
                    }
                  }
                }
              }
            })
      }
    }
    /* location wise edd */
}

  function findSpecificEDDMsg(){
  //console.log('call function findSpecificEDDMsg')
  if(typeof edd_exclude_product != 'undefined' && edd_exclude_product != 'not_set' && edd_exclude_product.filter(e => e.check_rule_for  == edd_sb_product_id).length > 0){
    sb_is_exclude_product = '1';
    //console.log('=> exclude product');
  }
  
  else {

    if(typeof sb_edd_specific_product_msg != 'undefined' && sb_edd_specific_product_msg != 'not_set' && sb_edd_specific_product_msg.filter(e => e.check_rule_for.toLocaleLowerCase().indexOf(edd_sb_product_id.toLocaleLowerCase()) != -1).length > 0){
      //console.log('Specific Mesage type => Product ');
       setEddMessageFromExtension(sb_edd_specific_product_msg,edd_sb_product_id,'product');

    }
  

    if(sb_set_specific_msg == 0 && typeof sb_edd_collection_msg != 'undefined' && sb_edd_collection_msg != 'not_set' ){
      //console.log('Specific Mesage type => Collection ');
        for(var c=0; c<edd_sb_collection_id.length; c++){
         setEddMessageFromExtension(sb_edd_collection_msg,edd_sb_collection_id[c],'collection');
         if(is_set_msg_for_sb_collection == '1'){
          break;
        }
        }
    }
   

    if(sb_set_specific_msg == 0 && typeof sb_edd_product_vendor_msg != 'undefined' && sb_edd_product_vendor_msg != 'not_set'  && sb_edd_product_vendor_msg.filter(e => e.check_rule_for.toLocaleLowerCase().indexOf(edd_sb_product_vendor.toLocaleLowerCase()) != -1).length > 0){
      //console.log('Specific Mesage type => Product Vendor');
      setEddMessageFromExtension(sb_edd_product_vendor_msg,edd_sb_product_vendor,'vendor');
    }
       

     if(sb_set_specific_msg == 0 && typeof sb_edd_product_tag_msg != 'undefined' && sb_edd_product_tag_msg != 'not_set'){
        //console.log('Specific Mesage type => Product Tag');
       for(var t=0; t<edd_sb_product_tag.length; t++){
         setEddMessageFromExtension(sb_edd_product_tag_msg,edd_sb_product_tag[t],'tag');
        if(is_set_msg_for_sb_product_tag == '1'){
          break;
        }
       }        
      }

    if(sb_set_specific_msg == 0 && typeof sb_edd_all_product_msg != 'undefined' && sb_edd_all_product_msg != 'not_set'  && sb_edd_all_product_msg.filter(e => e.check_rule_for  == 'all_product').length > 0){
        //console.log('Specific Mesage type => All Product');
        setEddMessageFromExtension(sb_edd_all_product_msg,'all_product','all_product');
      }    
    }  
  }

  function checkLocationWiseEddMessage(edd_msg_list,check_with,check_with_location_id){
     check_loaction_qty = sb_location_with_qty[check_with_location_id];
    sb_product_location_have_qty = sb_product_have_qty;
    if(typeof check_loaction_qty != 'undefined'){
      if(edd_store_id > 2614 || edd_shop == 'diecaststoreuk.myshopify.com' || edd_shop == 'purrfetto.myshopify.com' ||  edd_shop == 'estimated-delivery-date-time.myshopify.com'){
        if( check_loaction_qty > 0){
          sb_product_location_have_qty = 1
        }else{
          sb_product_location_have_qty = 0
        }
      }
    }
     /* check shipping + zipcode , with location */
      pass_edd__in_out_stock_spe_c = edd_msg_list.filter(e => e.location_id == check_with_location_id && e.location_enable == '1' && e.zipcode_enable == '1' && e.shipping_enable == '1' &&  e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == sb_product_location_have_qty && e.country_code.indexOf(edd_user_country_code) != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling)  ;
      pass_edd_both_edd_spe_c = edd_msg_list.filter(e => e.location_id == check_with_location_id && e.location_enable == '1' && e.zipcode_enable == '1' && e.shipping_enable == '1' && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == 2 && e.country_code.indexOf(edd_user_country_code) != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling) ;
      pass_edd__in_out_stock_all_c = edd_msg_list.filter(e =>e.location_id == check_with_location_id && e.location_enable == '1' && e.zipcode_enable == '1' && e.shipping_enable == '1' && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == sb_product_location_have_qty && e.country_code.indexOf('all_country') != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling) ; 
      pass_edd_both_edd_all_c = edd_msg_list.filter(e => e.location_id == check_with_location_id && e.location_enable == '1' && e.zipcode_enable == '1' && e.shipping_enable == '1' && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == 2 && e.country_code.indexOf('all_country') != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling) ;
      /* check shipping + zipcode , with location*/

      /* check without shipping , with shipping , with location */
      if(pass_edd__in_out_stock_spe_c.length == 0){
        pass_edd__in_out_stock_spe_c = edd_msg_list.filter(e => e.location_id == check_with_location_id && e.location_enable == '1' && e.zipcode_enable == '1' && e.shipping_enable == '0'  &&  e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == sb_product_location_have_qty && e.country_code.indexOf(edd_user_country_code) != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling)  ;
      }
      if(pass_edd_both_edd_spe_c.length == 0){
        pass_edd_both_edd_spe_c = edd_msg_list.filter(e => e.location_id == check_with_location_id && e.location_enable == '1' && e.zipcode_enable == '1' && e.shipping_enable == '0' && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == 2 && e.country_code.indexOf(edd_user_country_code) != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling) ;
      }
      if(pass_edd__in_out_stock_all_c.length == 0){
        pass_edd__in_out_stock_all_c = edd_msg_list.filter(e =>e.location_id == check_with_location_id && e.location_enable == '1' && e.zipcode_enable == '1' && e.shipping_enable == '0' && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == sb_product_location_have_qty && e.country_code.indexOf('all_country') != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling) ; 
      }
      if(pass_edd_both_edd_all_c.length == 0){
        pass_edd_both_edd_all_c = edd_msg_list.filter(e => e.location_id == check_with_location_id && e.location_enable == '1'  && e.zipcode_enable == '1' && e.shipping_enable == '0' && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == 2 && e.country_code.indexOf('all_country') != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling) ;
      }
     /* check check without shipping , with shipping , with location*/
    
      /* check with shipping + without zipcode + with location */
      if(pass_edd__in_out_stock_spe_c.length == 0){
        pass_edd__in_out_stock_spe_c = edd_msg_list.filter(e => e.location_id == check_with_location_id && e.location_enable == '1' && e.zipcode_enable == '0' && e.shipping_enable == '1'  &&  e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == sb_product_location_have_qty && e.country_code.indexOf(edd_user_country_code) != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling)  ;
      }
      if(pass_edd_both_edd_spe_c.length == 0){
        pass_edd_both_edd_spe_c = edd_msg_list.filter(e => e.location_id == check_with_location_id && e.location_enable == '1' && e.zipcode_enable == '0' && e.shipping_enable == '1' && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == 2 && e.country_code.indexOf(edd_user_country_code) != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling) ;
      }
      if(pass_edd__in_out_stock_all_c.length == 0){
        pass_edd__in_out_stock_all_c = edd_msg_list.filter(e =>e.location_id == check_with_location_id && e.location_enable == '1' && e.zipcode_enable == '0' && e.shipping_enable == '1' && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == sb_product_location_have_qty && e.country_code.indexOf('all_country') != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling) ; 
      }
      if(pass_edd_both_edd_all_c.length == 0){
        pass_edd_both_edd_all_c = edd_msg_list.filter(e => e.location_id == check_with_location_id && e.location_enable == '1'  && e.zipcode_enable == '0' && e.shipping_enable == '1' && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == 2 && e.country_code.indexOf('all_country') != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling) ;
      }
     /* check with shipping + without zipcode + with location */

      /* check only location */
      if(pass_edd__in_out_stock_spe_c.length == 0){
        pass_edd__in_out_stock_spe_c = edd_msg_list.filter(e => e.location_id == check_with_location_id && e.location_enable == '1' && e.zipcode_enable == '0' && e.shipping_enable == '0' &&  e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == sb_product_location_have_qty && e.country_code.indexOf(edd_user_country_code) != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling)  ;
      }
      if(pass_edd_both_edd_spe_c.length == 0){
        pass_edd_both_edd_spe_c = edd_msg_list.filter(e => e.location_id == check_with_location_id && e.location_enable == '1' && e.zipcode_enable == '0' && e.shipping_enable == '0'  && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == 2 && e.country_code.indexOf(edd_user_country_code) != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling) ;
      }
      if(pass_edd__in_out_stock_all_c.length == 0){
        pass_edd__in_out_stock_all_c = edd_msg_list.filter(e =>e.location_id == check_with_location_id && e.location_enable == '1' && e.zipcode_enable == '0' && e.shipping_enable == '0'  && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == sb_product_location_have_qty && e.country_code.indexOf('all_country') != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling) ; 
      }
      if(pass_edd_both_edd_all_c.length == 0){
        pass_edd_both_edd_all_c = edd_msg_list.filter(e => e.location_id == check_with_location_id && e.location_enable == '1' && e.zipcode_enable == '0' && e.shipping_enable == '0'  && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == 2 && e.country_code.indexOf('all_country') != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling) ;
      }
      /* check only location */
    return {'check_edd__in_out_stock_spe_c':pass_edd__in_out_stock_spe_c,
                'check_edd_both_edd_spe_c':pass_edd_both_edd_spe_c,
                'check_edd__in_out_stock_all_c':pass_edd__in_out_stock_all_c,
                'check_edd_both_edd_all_c':pass_edd_both_edd_all_c}
  }
  function checkZipcodeWiseEddMessage(check_edd_msg){
    get_edd_msg_arr = check_edd_msg[0];
    var zipcode_with_shipping_set = '0';
    var only_zipping_set = '0';

    for(i=0;i<check_edd_msg.length;i++){
       if(typeof(check_edd_msg[i].zipcode_enable) != "undefined" && typeof(check_edd_msg[i].shipping_enable) != "undefined"){
         if(check_edd_msg[i].zipcode_enable == "1" && check_edd_msg[i].shipping_enable == "1" && check_edd_msg[i].is_enable == "1"){
           get_edd_msg_arr = check_edd_msg[i];
           zipcode_with_shipping_set = '1';
           only_zipping_set = '1';
           break;
         }
      }
    }

    if(zipcode_with_shipping_set == '0'){
      for(i=0;i<check_edd_msg.length;i++){
         if(typeof(check_edd_msg[i].zipcode_enable) != "undefined"){
           if(check_edd_msg[i].zipcode_enable == "1" && check_edd_msg[i].shipping_enable == "0"  && check_edd_msg[i].is_enable == "1"){
             get_edd_msg_arr = check_edd_msg[i];
             only_zipping_set = '1';
             break;
           }
        }
      }
    }
    if(only_zipping_set == '0'){
        for(i=0;i<check_edd_msg.length;i++){
         if( typeof(check_edd_msg[i].shipping_enable) != "undefined"){
           if(check_edd_msg[i].shipping_enable == "1" && check_edd_msg[i].zipcode_enable == "0"  && check_edd_msg[i].is_enable == "1"){
             get_edd_msg_arr = check_edd_msg[i];

             break;
           }
        }
      }
    }
     
   // console.log(get_edd_msg_arr)
    return get_edd_msg_arr;
  }

   function  getEDDPriorityMSG(edd_msg_list,with_location,with_shipping,with_zipode,check_with,sb_product_have_qty,edd_user_country_code,check_edd__in_out_stock_spe_c,check_edd_both_edd_spe_c,check_edd__in_out_stock_all_c,check_edd_both_edd_all_c){
     if(check_edd__in_out_stock_spe_c.length == 0){
             check_edd__in_out_stock_spe_c = edd_msg_list.filter(e =>  {
               checkCheckRuledata = e.check_rule_for.split(',');
               if(checkCheckRuledata.length > 1){
                 return e.location_enable == with_location && e.shipping_enable == with_shipping && e.zipcode_enable == with_zipode && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == sb_product_have_qty && e.country_code.indexOf(edd_user_country_code) != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling;
               }else{
                 return e.location_enable == with_location && e.shipping_enable == with_shipping && e.zipcode_enable == with_zipode && e.check_rule_for.toLocaleLowerCase() == check_with.toLocaleLowerCase() && e.is_instock == sb_product_have_qty && e.country_code.indexOf(edd_user_country_code) != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling;
               }  
             }
          )  ;
     }
    if(check_edd_both_edd_spe_c.length == 0){
             check_edd_both_edd_spe_c = edd_msg_list.filter(e => {
               checkCheckRuledata = e.check_rule_for.split(',');
               if(checkCheckRuledata.length > 1){
                 return e.location_enable == with_location && e.shipping_enable == with_shipping && e.zipcode_enable == with_zipode && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == 2 && e.country_code.indexOf(edd_user_country_code) != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling;
               }else{
                 return e.location_enable == with_location && e.shipping_enable == with_shipping && e.zipcode_enable == with_zipode && e.check_rule_for.toLocaleLowerCase() == check_with.toLocaleLowerCase() && e.is_instock == 2 && e.country_code.indexOf(edd_user_country_code) != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling;
               }
             } ) ;
     }
    if(check_edd__in_out_stock_all_c.length == 0){
             check_edd__in_out_stock_all_c = edd_msg_list.filter(e => 
               {
                 checkCheckRuledata = e.check_rule_for.split(',');
                 if(checkCheckRuledata.length > 1){
                   return  e.location_enable == with_location && e.shipping_enable == with_shipping && e.zipcode_enable == with_zipode && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == sb_product_have_qty && e.country_code.indexOf('all_country') != -1  && e.is_enable == '1'  && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling;
                 }else{
                   return  e.location_enable == with_location && e.shipping_enable == with_shipping && e.zipcode_enable == with_zipode && e.check_rule_for.toLocaleLowerCase() == check_with.toLocaleLowerCase() && e.is_instock == sb_product_have_qty && e.country_code.indexOf('all_country') != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling;
                 }
                
                }
            );
     }
    if(check_edd_both_edd_all_c.length == 0){
              check_edd_both_edd_all_c = edd_msg_list.filter(e => {
              checkCheckRuledata = e.check_rule_for.split(',');
               if(checkCheckRuledata.length > 1){
                 return e.location_enable == '0' && e.shipping_enable == with_shipping && e.zipcode_enable == with_zipode && e.check_rule_for.toLocaleLowerCase().indexOf(check_with.toLocaleLowerCase()) != -1 && e.is_instock == 2 && e.country_code.indexOf('all_country') != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling;
                }else{
                  return e.location_enable == '0' && e.shipping_enable == with_shipping && e.zipcode_enable == with_zipode && e.check_rule_for.toLocaleLowerCase() == check_with.toLocaleLowerCase() && e.is_instock == 2 && e.country_code.indexOf('all_country') != -1  && e.is_enable == '1' && e.additional_option == sb_additional_option && e.is_continue_selling == sb_is_continue_selling;
                }
              })
    }

     return {'check_edd__in_out_stock_spe_c':check_edd__in_out_stock_spe_c,
                'check_edd_both_edd_spe_c':check_edd_both_edd_spe_c,
                'check_edd__in_out_stock_all_c':check_edd__in_out_stock_all_c,
                'check_edd_both_edd_all_c':check_edd_both_edd_all_c}
  }
 

  function setEddMessageFromExtension(edd_msg_list,check_with,edd_rule_type){
      
      check_edd__in_out_stock_spe_c = [];
      check_edd_both_edd_spe_c = [];
      check_edd__in_out_stock_all_c = [];
      check_edd_both_edd_all_c = [];
      is_set_edd__in_out_stock_spe_c = '0';
      is_set_edd_both_edd_spe_c = '0';
      is_set_edd__in_out_stock_all_c = '0';
      is_set_edd_both_edd_all_c = '0';
      checkLocationData = {'check_edd__in_out_stock_spe_c':[],'check_edd_both_edd_spe_c':[],'check_edd__in_out_stock_all_c':[],'check_edd_both_edd_all_c':[]};
      checkEDDPriorityData = {'check_edd__in_out_stock_spe_c':[],'check_edd_both_edd_spe_c':[],'check_edd__in_out_stock_all_c':[],'check_edd_both_edd_all_c':[]};  
    check_with_location_id = 'not_set';
    /* check location wise message */
    if(sb_is_rule_set_for_location == '1'){
      set_edd_in_out_spe_c = 0;
      set_edd_both_spe_c = 0;
      set_edd_in_out_all = 0;
      set_edd_both_all = 0;
     
     /* check with location max qty having */
       checkLocationData = checkLocationWiseEddMessage(edd_msg_list,check_with,sb_locationId_having_max_qty);
       if(checkLocationData.check_edd__in_out_stock_spe_c.length > 0 && is_set_edd__in_out_stock_spe_c == 0 ){
                  is_set_edd__in_out_stock_spe_c = 1;
                  check_edd__in_out_stock_spe_c = checkLocationData.check_edd__in_out_stock_spe_c;
          }
          if(checkLocationData.check_edd_both_edd_spe_c.length > 0 && is_set_edd_both_edd_spe_c == 0){
                  is_set_edd_both_edd_spe_c = 1;
                  check_edd_both_edd_spe_c = checkLocationData.check_edd_both_edd_spe_c;
          }
          if(checkLocationData.check_edd__in_out_stock_all_c.length > 0 && is_set_edd__in_out_stock_all_c == 0){
                  is_set_edd__in_out_stock_all_c = 1;
                  check_edd__in_out_stock_all_c = checkLocationData.check_edd__in_out_stock_all_c;
          }
          if(checkLocationData.check_edd_both_edd_all_c.length > 0 && is_set_edd_both_edd_all_c == 0){
                  is_set_edd_both_edd_all_c = 1;
                  check_edd_both_edd_all_c = checkLocationData.check_edd_both_edd_all_c;
          }

        /* check with location all location if location having a max qty => message is not set */
      for(i=0;i<sb_product_locations.length;i++){
        check_with_location_id = sb_product_locations[i];
        
        checkLocationData = checkLocationWiseEddMessage(edd_msg_list,check_with,check_with_location_id);
        
          if(checkLocationData.check_edd__in_out_stock_spe_c.length > 0 && is_set_edd__in_out_stock_spe_c == 0 ){
                  is_set_edd__in_out_stock_spe_c = 1;
                  check_edd__in_out_stock_spe_c = checkLocationData.check_edd__in_out_stock_spe_c;
          }
          if(checkLocationData.check_edd_both_edd_spe_c.length > 0 && is_set_edd_both_edd_spe_c == 0){
                  is_set_edd_both_edd_spe_c = 1;
                  check_edd_both_edd_spe_c = checkLocationData.check_edd_both_edd_spe_c;
          }
          if(checkLocationData.check_edd__in_out_stock_all_c.length > 0 && is_set_edd__in_out_stock_all_c == 0){
                  is_set_edd__in_out_stock_all_c = 1;
                  check_edd__in_out_stock_all_c = checkLocationData.check_edd__in_out_stock_all_c;
          }
          if(checkLocationData.check_edd_both_edd_all_c.length > 0 && is_set_edd_both_edd_all_c == 0){
                  is_set_edd_both_edd_all_c = 1;
                  check_edd_both_edd_all_c = checkLocationData.check_edd_both_edd_all_c;
          }
        }
      }
  
    /* check location wise message */

    /* check priority with shipping , with zipcode */
    with_location = '0';
    with_shipping = '1';
    with_zipode = '1';
    checkEDDPriorityData = getEDDPriorityMSG(edd_msg_list,with_location,with_shipping,with_zipode,check_with,sb_product_have_qty,edd_user_country_code,check_edd__in_out_stock_spe_c,check_edd_both_edd_spe_c,check_edd__in_out_stock_all_c,check_edd_both_edd_all_c)
    if(check_edd__in_out_stock_spe_c.length == 0 && checkEDDPriorityData.check_edd__in_out_stock_spe_c.length != 0 && is_set_edd__in_out_stock_spe_c == '0'){
             check_edd__in_out_stock_spe_c = checkEDDPriorityData.check_edd__in_out_stock_spe_c;
             is_set_edd__in_out_stock_spe_c = '1';
     }
    if(check_edd_both_edd_spe_c.length == 0 && checkEDDPriorityData.check_edd_both_edd_spe_c.length != 0 && is_set_edd_both_edd_spe_c == '0'){
             check_edd_both_edd_spe_c = checkEDDPriorityData.check_edd_both_edd_spe_c;
              is_set_edd_both_edd_spe_c ='1';
     }
    if(check_edd__in_out_stock_all_c.length == 0 && checkEDDPriorityData.check_edd__in_out_stock_all_c.length != 0 && is_set_edd__in_out_stock_all_c == '0'){
             check_edd__in_out_stock_all_c = checkEDDPriorityData.check_edd__in_out_stock_all_c;
             is_set_edd__in_out_stock_all_c = '1';
     }
    if(check_edd_both_edd_all_c.length == 0 && checkEDDPriorityData.check_edd_both_edd_all_c.length != 0 && is_set_edd_both_edd_all_c == '0'){
             check_edd_both_edd_all_c = checkEDDPriorityData.check_edd_both_edd_all_c;
             is_set_edd_both_edd_all_c = '1'
     }
   
    /* check priority with shipping , with zipcode */

    /* check priority without shipping , with zipcode */
    with_location = '0';
    with_shipping = '0';
    with_zipode = '1';
    checkEDDPriorityData = getEDDPriorityMSG(edd_msg_list,with_location,with_shipping,with_zipode,check_with,sb_product_have_qty,edd_user_country_code,check_edd__in_out_stock_spe_c,check_edd_both_edd_spe_c,check_edd__in_out_stock_all_c,check_edd_both_edd_all_c)
    
    if(check_edd__in_out_stock_spe_c.length == 0 && checkEDDPriorityData.check_edd__in_out_stock_spe_c.length != 0 && is_set_edd__in_out_stock_spe_c == '0'){
             check_edd__in_out_stock_spe_c = checkEDDPriorityData.check_edd__in_out_stock_spe_c;
             is_set_edd__in_out_stock_spe_c = '1';
     }
    if(check_edd_both_edd_spe_c.length == 0 && checkEDDPriorityData.check_edd_both_edd_spe_c.length != 0 && is_set_edd_both_edd_spe_c == '0'){
             check_edd_both_edd_spe_c = checkEDDPriorityData.check_edd_both_edd_spe_c;
              is_set_edd_both_edd_spe_c ='1';
     }
    if(check_edd__in_out_stock_all_c.length == 0 && checkEDDPriorityData.check_edd__in_out_stock_all_c.length != 0 && is_set_edd__in_out_stock_all_c == '0'){
             check_edd__in_out_stock_all_c = checkEDDPriorityData.check_edd__in_out_stock_all_c;
             is_set_edd__in_out_stock_all_c = '1';
     }
    if(check_edd_both_edd_all_c.length == 0 && checkEDDPriorityData.check_edd_both_edd_all_c.length != 0 && is_set_edd_both_edd_all_c == '0'){
             check_edd_both_edd_all_c = checkEDDPriorityData.check_edd_both_edd_all_c;
             is_set_edd_both_edd_all_c = '1'
     }
    // console.log(check_edd_both_edd_all_c)
    /* check priority without shipping , with zipcode */

    /* check priority with shipping , without zipcode */
    with_location = '0';
    with_shipping = '1';
    with_zipode = '0';
    checkEDDPriorityData = getEDDPriorityMSG(edd_msg_list,with_location,with_shipping,with_zipode,check_with,sb_product_have_qty,edd_user_country_code,check_edd__in_out_stock_spe_c,check_edd_both_edd_spe_c,check_edd__in_out_stock_all_c,check_edd_both_edd_all_c)
    if(check_edd__in_out_stock_spe_c.length == 0 && checkEDDPriorityData.check_edd__in_out_stock_spe_c.length != 0 && is_set_edd__in_out_stock_spe_c == '0'){
             check_edd__in_out_stock_spe_c = checkEDDPriorityData.check_edd__in_out_stock_spe_c;
             is_set_edd__in_out_stock_spe_c = '1';
     }
    if(check_edd_both_edd_spe_c.length == 0 && checkEDDPriorityData.check_edd_both_edd_spe_c.length != 0 && is_set_edd_both_edd_spe_c == '0'){
             check_edd_both_edd_spe_c = checkEDDPriorityData.check_edd_both_edd_spe_c;
              is_set_edd_both_edd_spe_c ='1';
     }
    if(check_edd__in_out_stock_all_c.length == 0 && checkEDDPriorityData.check_edd__in_out_stock_all_c.length != 0 && is_set_edd__in_out_stock_all_c == '0'){
             check_edd__in_out_stock_all_c = checkEDDPriorityData.check_edd__in_out_stock_all_c;
             is_set_edd__in_out_stock_all_c = '1';
     }
    if(check_edd_both_edd_all_c.length == 0 && checkEDDPriorityData.check_edd_both_edd_all_c.length != 0 && is_set_edd_both_edd_all_c == '0'){
             check_edd_both_edd_all_c = checkEDDPriorityData.check_edd_both_edd_all_c;
             is_set_edd_both_edd_all_c = '1'
     }
    /* check priority with shipping , without zipcode */

    /* check priority witout shipping, location , zipcode */
    with_location = '0';
    with_shipping = '0';
    with_zipode = '0';
    checkEDDPriorityData = getEDDPriorityMSG(edd_msg_list,with_location,with_shipping,with_zipode,check_with,sb_product_have_qty,edd_user_country_code,check_edd__in_out_stock_spe_c,check_edd_both_edd_spe_c,check_edd__in_out_stock_all_c,check_edd_both_edd_all_c)
    if(check_edd__in_out_stock_spe_c.length == 0 && checkEDDPriorityData.check_edd__in_out_stock_spe_c.length != 0 && is_set_edd__in_out_stock_spe_c == '0'){
             check_edd__in_out_stock_spe_c = checkEDDPriorityData.check_edd__in_out_stock_spe_c;
             is_set_edd__in_out_stock_spe_c = '1';
     }
    if(check_edd_both_edd_spe_c.length == 0 && checkEDDPriorityData.check_edd_both_edd_spe_c.length != 0 && is_set_edd_both_edd_spe_c == '0'){
             check_edd_both_edd_spe_c = checkEDDPriorityData.check_edd_both_edd_spe_c;
              is_set_edd_both_edd_spe_c ='1';
     }
    if(check_edd__in_out_stock_all_c.length == 0 && checkEDDPriorityData.check_edd__in_out_stock_all_c.length != 0 && is_set_edd__in_out_stock_all_c == '0'){
             check_edd__in_out_stock_all_c = checkEDDPriorityData.check_edd__in_out_stock_all_c;
             is_set_edd__in_out_stock_all_c = '1';
     }
    if(check_edd_both_edd_all_c.length == 0 && checkEDDPriorityData.check_edd_both_edd_all_c.length != 0 && is_set_edd_both_edd_all_c == '0'){
             check_edd_both_edd_all_c = checkEDDPriorityData.check_edd_both_edd_all_c;
             is_set_edd_both_edd_all_c = '1'
     }
    /* check priority witout shipping, location , zipcode */
    
   
    if(check_edd__in_out_stock_spe_c.length > 0){
      edd_multiple_rule_for_shipping = check_edd__in_out_stock_spe_c; 
      check_edd_msg = check_edd__in_out_stock_spe_c[0];
      sb_edd_zipcode_enable = check_edd_msg.zipcode_enable;
      sb_edd_zipcode_list = check_edd_msg.zipcode_list;
      sb_edd_shipping_enable = check_edd_msg.shipping_enable;
      sb_edd_location_enable = check_edd_msg.location_enable;
      sb_edd_preview_design = check_edd_msg.preview_design;
      sb_edd_message = check_edd_msg.message;
      sb_edd_message = getLanguageWiseMsg(check_edd_msg,sb_edd_message);
      sb_set_specific_msg = 1;
      checkSpecificMsgForSB(edd_rule_type);
      sb_edd_rule_list = check_edd__in_out_stock_spe_c;

    }
    else if(check_edd_both_edd_spe_c.length > 0){
      edd_multiple_rule_for_shipping = check_edd_both_edd_spe_c; 
      check_edd_msg = check_edd_both_edd_spe_c[0];
      sb_edd_zipcode_enable = check_edd_msg.zipcode_enable;
      sb_edd_zipcode_list = check_edd_msg.zipcode_list;
      sb_edd_shipping_enable = check_edd_msg.shipping_enable;
      sb_edd_location_enable = check_edd_msg.location_enable;
      sb_edd_preview_design = check_edd_msg.preview_design;
      sb_edd_message = check_edd_msg.message;
      sb_edd_message = getLanguageWiseMsg(check_edd_msg,sb_edd_message);
      sb_set_specific_msg = 1;
      checkSpecificMsgForSB(edd_rule_type);
      sb_edd_rule_list = check_edd_both_edd_spe_c;

    }
    else if(check_edd__in_out_stock_all_c.length > 0){
      edd_multiple_rule_for_shipping = check_edd__in_out_stock_all_c; 
      check_edd_msg = check_edd__in_out_stock_all_c[0];
      sb_edd_zipcode_enable = check_edd_msg.zipcode_enable;
      sb_edd_zipcode_list = check_edd_msg.zipcode_list;
      sb_edd_shipping_enable = check_edd_msg.shipping_enable;
      sb_edd_location_enable = check_edd_msg.location_enable;
      sb_edd_preview_design = check_edd_msg.preview_design;
      sb_edd_message = check_edd_msg.message;
      sb_edd_message = getLanguageWiseMsg(check_edd_msg,sb_edd_message);
      sb_set_specific_msg = 1;
      checkSpecificMsgForSB(edd_rule_type);
      sb_edd_rule_list = check_edd__in_out_stock_all_c;

    }
    else if(check_edd_both_edd_all_c.length > 0){
      edd_multiple_rule_for_shipping = check_edd_both_edd_all_c;
      check_edd_msg = check_edd_both_edd_all_c[0];
      sb_edd_zipcode_enable = check_edd_msg.zipcode_enable;
      sb_edd_zipcode_list = check_edd_msg.zipcode_list;
      sb_edd_shipping_enable = check_edd_msg.shipping_enable;
      sb_edd_location_enable = check_edd_msg.location_enable;
      sb_edd_preview_design = check_edd_msg.preview_design;
      sb_edd_message = check_edd_msg.message;
      sb_edd_message = getLanguageWiseMsg(check_edd_msg,sb_edd_message);
      sb_set_specific_msg = 1;
      checkSpecificMsgForSB(edd_rule_type);
      sb_edd_rule_list = check_edd_both_edd_all_c;

    }

    if(sb_edd_zipcode_enable == '1'){
      is_country_dropdown_on = '0'
    }
   // console.log('******************* display edd messsge *****************')
   // console.log(sb_edd_message)
  }

  function getLanguageWiseMsg(check_edd_msg,message){
  store_language = Shopify.locale;
    

    if(typeof sb_edd_options.store_language != 'undefined'){
       sb_store_languages = sb_edd_options.store_language;
       sb_store_languages = sb_store_languages.split(',')
       //console.log(sb_store_languages)
    }else{
      sb_store_languages = 'all_language';
    }
    if(typeof check_edd_msg.language_grp_msgs != 'undefined'){
         language_grp_msgs = check_edd_msg.language_grp_msgs;
         var get_lang_wise_msg = '0';
         //console.log('language_grp_msgs')
         //console.log(language_grp_msgs)
         if(language_grp_msgs != 'not_set'){
          // console.log('set lanaguage grp')
           for(l=0;l<language_grp_msgs.length;l++){
           check_language_code = language_grp_msgs[l]['language_code'];
           check_message = language_grp_msgs[l]['message']

            //console.log('store_language '+store_language+' check_language_code '+check_language_code)
             //console.log(sb_store_languages.includes(check_language_code) && (store_language == check_language_code) && get_lang_wise_msg == '0')
           if(check_language_code == 'all_language' && get_lang_wise_msg == '0'){
             //console.log('set msf for all language')
           message = language_grp_msgs[l]['message'];
    
           if(typeof language_grp_msgs[l]['date_format'] != 'undefined'){
              specific_date_format = language_grp_msgs[l]['date_format'];
              specific_date_option = language_grp_msgs[l]['date_option'];
              specific_custom_date_format = language_grp_msgs[l]['custom_date_format'];
           }
           if(typeof language_grp_msgs[l]['specific_cutofftime'] != 'undefined'){
              specific_cutofftime = language_grp_msgs[l]['specific_cutofftime']
              specific_cutofftime_enable = language_grp_msgs[l]['specific_cutofftime_enable']
            }
             //console.log(message)
           }
           
           if(sb_store_languages.includes(check_language_code) && (store_language.includes(check_language_code)) && get_lang_wise_msg == '0'){
           message = language_grp_msgs[l]['message'];
           if(typeof language_grp_msgs[l]['date_format'] != 'undefined'){
              specific_date_format = language_grp_msgs[l]['date_format'];
              specific_date_option = language_grp_msgs[l]['date_option'];
              specific_custom_date_format = language_grp_msgs[l]['custom_date_format'];
           }
           if(typeof language_grp_msgs[l]['specific_cutofftime'] != 'undefined'){
              specific_cutofftime = language_grp_msgs[l]['specific_cutofftime']
              specific_cutofftime_enable = language_grp_msgs[l]['specific_cutofftime_enable']
            }
             //console.log(message)
           get_lang_wise_msg = '1';
           }
         }
         }
    
    }
       
       return message;
    }
   

   function checkSpecificMsgForSB(edd_rule_type){
    if(edd_rule_type == 'product'){
      sb_is_set_msg_for_product = '1';
    }
    if(edd_rule_type == 'collection'){
      is_set_msg_for_sb_collection = '1';
      is_set_msg_for_sb_collection_for_collection = '1';
    }
    if(edd_rule_type == 'tag'){
      is_set_msg_for_sb_product_tag = '1';
      is_set_msg_for_sb_product_tag_for_location = '1';
    }
    if(edd_rule_type == 'vendor'){
      is_set_msg_for_sb_product_vendor = '1';
    }
    if(edd_rule_type == 'all_product'){
      is_set_msg_for_sb_all_product = '1';
    }
  }
</script>

<!-- END app snippet -->



<!-- set product date -->





<!-- set product date -->






  
  
  
  
  
  
  
  
  

  


<!-- cart calendar data -->













<!-- cart calendar data -->


<!-- check collection page -->

  <script type="lazyload_int"> 
  //console.log('theme extension with metafields')
  if(typeof is_rule_set_for_location != 'undefined'){
  //console.log(typeof is_rule_set_for_location)
  
    if(is_rule_set_for_location == '1'){
      //console.log('kill the process')
      get_product_location_response = '1';
      //clearInterval(checkLocation);
    }
    
    //console.log('is_rule_set_for_location '+is_rule_set_for_location+' get_product_location_response '+get_product_location_response)
  }

  var check_theme_extention = "theme_extension";
  // 25-11-23 push
  if(window.location.href.includes('sb_clear_coockie=')){
    document.cookie = "edd_data=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
  }
  {% if template contains 'collection' %}
  var edd_is_collection_page = `1`;
  {% else %}
  var edd_is_collection_page = `0`;
  {% endif %}
    
  if(typeof sb_edd_options != 'undefined'){
  var edd_for_customer_or_admin = sb_edd_options.edd_for_customer_or_admin;
  //var edd_main_object = {  
  //"is_active_payment":sb_edd_plan_info.is_active,
  //"is_active":1,
  //"edd_plan_info":sb_edd_plan_info,
  //"edd_options": sb_edd_options, 
  //"is_install":edd_is_install,
 // "is_enable": sb_edd_options.is_enabled,
 // "message":sb_edd_options.message,
 // "edd_logic":'new'  
 // }
  }

  //var customer_responseData_ode = {"min_day"=>"1", "max_day"=>"3", "calender_alignment"=>"right", "cart_calendar_heading"=>"Schedule Product Delivery", "cart_calendar_err_msg"=>"Please select delivery date before checkout", "order_delivery_date_label"=>"Delivery Date", "order_delivery_day_label"=>"Delivery Day", "weekday_translation"=>"Sun,Mon,Tue,Wen,Thu,Fri,Sat", "month_translation"=>"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec", "off_day"=>""}
        
  var edd_sb_store_real_time =  `{{ "now" | date: "%Y/%m/%d %H:%M" }}`;
</script>
    


     
   {% if template contains 'product' %}
    <script type="lazyload_int" data-src="https://estimated-delivery-days.setubridgeapps.com/estimated-delivery-days/app/edd-proxy/main/edd_metafields_extension.js?17_07__" ></script>
    
     
    <!-- BEGIN app snippet: edd_on_variant_selection_having_instock_outofstock -->
 
    
    
<div class='sb_variant_code' style="display: none">
  {% for variant in product.variants %}
  <p class ='sb_variant_id_{{ variant.id }} sb_variant_class' data-variant-id= {{ variant.id  }} data-available =true data-quantity = {{ variant.inventory_quantity }}>{{ variant.inventory_quantity }}</p>
  {% endfor %}
</div>






<script type="lazyload_int">
console.log('load variant change event code ')
var sb_check_app_payment = `{"payment_status"=>"pending", "plan_name"=>nil, "store_id"=>"7020"}`;
var sb_variant_id = `{{ product.selected_or_first_available_variant.id }}`
var sb_is_product_page = `1`;
var sb_variant_data = { 
  {% for variant in product.variants %}
    {{ variant.id }}: `{{ variant.inventory_quantity }}`
    {% unless forloop.last %}
    ,
    {% endunless %}
  {% endfor %}
  
 }

  var loadScriptForVariantChange = function (url, callback) {
    var script = document.createElement("script");
    script.type = "text/javascript";
    if (script.readyState) {
      script.onreadystatechange = function () {
        if (script.readyState == "loaded" || script.readyState == "complete") {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else {
      script.onload = function () {
        callback();
      };
    }
    script.src = url;
    document.getElementsByTagName("head")[0].appendChild(script);
  };

  if (typeof jQuery === "undefined" || parseFloat(jQuery.fn.jquery) < 1.7) {
    loadScriptForVariantChange(
      "//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js",
      function () {
        jQuery191 = jQuery.noConflict(true);
        ChangeVariantOptionEvent(jQuery191);
      }
    );
  } else {
     ChangeVariantOptionEvent($)
  }

function ChangeVariantOptionEvent($){
  //showVariantwiseEDDonLoad($);
  $(document).ready(function(){
   
    setTimeout(function(){

       addVariantOptionClass($)
      
      $(document).on('click','.sb_variant_option',function(){
          triggerVariantChange($)
      }) 
      $(document).on('change','.sb_variant_option',function(){
          triggerVariantChange($)
      }) 
      
    },1000)
  })
}

function addVariantOptionClass($){
  if($('.sb_code').length == 0 && $('.sb_option').length == 0 && $('.sb_variant').length == 0){
    console.log('=> Add variant change class')
        $('input[type="radio"]').each(function(){
          if(!$(this).hasClass('sb_variant_option')){
            $(this).addClass('sb_variant_option')
          }
        })
        $('select').each(function(){
          if(!$(this).hasClass('sb_variant_option') && !(this).hasClass('edd_country_msg_change') && !(this).hasClass('shipment_method_selector')){
            $(this).addClass('sb_variant_option')
          }
        })
  }
}
  
function triggerVariantChange($){
    if($('.sb_code').length == 0 && $('.sb_option').length == 0 && $('.sb_variant').length == 0){
      console.log('Variant Option Change')
      setTimeout(function () {
        if (window.location.href.indexOf("?variant=") > -1) {
          window_url = window.location.href;
          if (window_url.indexOf("#") > 1) {
            window_url = window_url.split("#");
            window_url = window_url[0];
          }
          if (window_url.indexOf("?") > 1) {
            window_url = window_url.split("?");
            window_url = window_url[1];
          }
          if (window_url.indexOf("&") > 1) {
            window_url = window_url.split("&");
            window_url = window_url[0];
          }
          sb_variant_id = window_url.replace("variant=", "");
        } else if (window.location.href.indexOf("&variant=") > -1) {
          window_url = window.location.href;
          if (window_url.indexOf("#") > 1) {
            window_url = window_url.split("#");
            window_url = window_url[0];
          }
          if (window_url.indexOf("&") > 1) {
            window_url = window_url.split("&");
            window_url = window_url[1];
          }
          sb_variant_id = window_url.replace("variant=", "");
      }

        callVariantWiseInventoryMessage($, sb_variant_id);
        addVariantOptionClass($);
        //getMetafieldMessage($, sb_variant_id);
      }, 800);
    }
  }
  
function callVariantWiseInventoryMessage($,sb_variant_id) {
    sb_location_with_qty = variant_with_warehouse_qty[sb_variant_id]
    sb_set_specific_msg = 0;
    sb_is_set_msg_for_product = "0";
    is_set_msg_for_product_type = "0";
    is_set_msg_for_sb_product_tag = "0";
    is_set_msg_for_sb_product_vendor = "0";
    is_set_msg_for_sb_all_product = "0";
    is_set_msg_for_sb_collection = "0";
    sb_edd_message = 'not_set';

    variant_qty = $(".sb_variant_id_" + sb_variant_id).attr("data-quantity"); 
    var variant_inventory = 0;

    if (variant_qty > 0) {
      variant_inventory = 1;
    }else{
      variant_inventory = 0;
    }

    if(sb_edd_options.is_enabled == '0' || sb_edd_shipping_enable != '0' || sb_edd_location_enable != '0' ||sb_edd_location_enable !='0' || sb_edd_zipcode_enable == 1  || sb_is_exclude_product == '1' || is_country_dropdown_on == 'true' ){
      console.log('remove variant change functionality')
           return false
    }

    //if(variant_qty == 0){
      $('.deliverydate.sb_delivery,.add_hidden_delivery').remove();
   // }else{
      
    sb_product_have_qty = variant_inventory;
    product_have_qty = variant_qty;

   if($(".deliverydate.sb_delivery .delivery_msg").length == 0){
     //console.log('call function again')
    
    findSpecificEDDMsg();

    if (typeof sb_edd_preview_design !== 'undefined' && sb_edd_preview_design != 'not_set' && sb_set_specific_msg == '1') {
      specific_preview_design = sb_edd_preview_design
    } else {
      specific_preview_design = edd_main_object.preview_design;
    }
    if(typeof sb_edd_message !== 'undefined' && sb_edd_message != 'not_set'){
      message = sb_edd_message
    }else{
      message = sb_edd_options.message;     
    }

    addEstimatedMessageClass($);
    displayOnCartPage($);
    
    if(( message != 'not_set' && typeof hide_default_message  != 'undefined' && hide_default_message == 0)  || sb_edd_message != 'not_set' ){
      variantWiseInstockOutofstockMsgFromEDDScript($);
    }else{
      $('.deliverydate.sb_delivery,.add_hidden_delivery').remove();
    }

    }
  //}
  }

function showVariantwiseEDDonLoad($){
      checkEDDCookieSetIntervalForVariant = setInterval(function () {
      var check_edd_data = getSbScriptCookie("edd_data");
      
      if (typeof sb_is_rule_set_for_location == 'undefined') {
       
        if (check_edd_data != "") {
          clearInterval(checkEDDCookieSetIntervalForVariant);
          triggerVariantChange($)
        }
      } else if (check_edd_data != "" && sb_is_rule_set_for_location == '0') {
        clearInterval(checkEDDCookieSetIntervalForVariant);
        triggerVariantChange($)
      }
      else if (check_edd_data != "" && sb_is_rule_set_for_location == '1') {
        if (get_location_response == '1') {
          clearInterval(checkEDDCookieSetIntervalForVariant);
          setTimeout(function () {
            triggerVariantChange($)
          }, 1000)
        }
      }
    }, 700)
}
</script>
<!-- END app snippet -->
{% endif %}
    
    
    {% unless template contains 'cart' %}
    <script type="lazyload_int">
      var loadelementScriptUsingExtension = function(url, callback) {
        var script = document.createElement('script');
        script.type = 'text/javascript';
        if (script.readyState) {
          script.onreadystatechange = function() {
            if (script.readyState == 'loaded' || script.readyState == 'complete') {
              script.onreadystatechange = null;
              callback();
            }
          };
        } else {
          script.onload = function() {
            callback();
          };
        } script.src = url;
        document.getElementsByTagName('head')[0].appendChild(script);
      };
      adress_url = window.location.href;
      if (adress_url.includes("sb_picker")) {
        let edd_queryString = (Math.random() + 1).toString(36).substring(7);
        loadelementScriptUsingExtension('https://estimated-delivery-days.setubridgeapps.com/estimated-delivery-days/app/edd-proxy/main/element_picker_for_change_message_position.js?' + edd_queryString, function() {})

      }
    </script>
  {% endunless %}

</div>